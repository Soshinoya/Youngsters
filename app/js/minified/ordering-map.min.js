const deliveryPoints=[{id:0,name:"г. Москва, м. Текстильщики, 8-я улица Текстильщиков, д. 10",description:"Станция метро Текстильщики, 1 вагон из центра, из стеклянных дверей направо. Идти вдоль черного забора до входа на стадион (до шлагбаума), после повернуть налево и идти до светофора, далее прямо через дорогу. Через 20 метров справа расположен пункт выдачи заказов.",schedule:"Ежедневно 10:00 - 20:00",lat:55.7558,lng:37.6176},{id:1,name:"г. Москва, м. Текстильщики, 8-я улица Текстильщиков, д. 10",description:"Станция метро Текстильщики, 1 вагон из центра, из стеклянных дверей направо. Идти вдоль черного забора до входа на стадион (до шлагбаума), после повернуть налево и идти до светофора, далее прямо через дорогу. Через 20 метров справа расположен пункт выдачи заказов.",schedule:"Ежедневно 10:00 - 20:00",lat:55.7539,lng:37.6208},{id:2,name:"г. Москва, м. Текстильщики, 8-я улица Текстильщиков, д. 10",description:"Станция метро Текстильщики, 1 вагон из центра, из стеклянных дверей направо. Идти вдоль черного забора до входа на стадион (до шлагбаума), после повернуть налево и идти до светофора, далее прямо через дорогу. Через 20 метров справа расположен пункт выдачи заказов.",schedule:"Ежедневно 10:00 - 20:00",lat:55.7415,lng:37.6202}],shops=[{id:0,name:"г. Москва, м. Текстильщики, 8-я улица Текстильщиков, д. 10",description:"Станция метро Текстильщики, 1 вагон из центра, из стеклянных дверей направо. Идти вдоль черного забора до входа на стадион (до шлагбаума), после повернуть налево и идти до светофора, далее прямо через дорогу. Через 20 метров справа расположен пункт выдачи заказов.",schedule:"Ежедневно 10:00 - 20:00",lat:55.7558,lng:37.6176},{id:1,name:"г. Москва, м. Текстильщики, 8-я улица Текстильщиков, д. 10",description:"Станция метро Текстильщики, 1 вагон из центра, из стеклянных дверей направо. Идти вдоль черного забора до входа на стадион (до шлагбаума), после повернуть налево и идти до светофора, далее прямо через дорогу. Через 20 метров справа расположен пункт выдачи заказов.",schedule:"Ежедневно 10:00 - 20:00",lat:55.7539,lng:37.6208},{id:2,name:"г. Москва, м. Текстильщики, 8-я улица Текстильщиков, д. 10",description:"Станция метро Текстильщики, 1 вагон из центра, из стеклянных дверей направо. Идти вдоль черного забора до входа на стадион (до шлагбаума), после повернуть налево и идти до светофора, далее прямо через дорогу. Через 20 метров справа расположен пункт выдачи заказов.",schedule:"Ежедневно 10:00 - 20:00",lat:55.7415,lng:37.6202}],map=L.map("map").setView([55.7558,37.6176],13),mapType=(L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(map),localStorage.getItem("ordering-map-type")),orderingMapPageTitle=(mapType||localStorage.setItem("ordering-map-type","delivery-point"),document.querySelector("head title")),sidebarTopText=document.querySelector(".sidebar-top__text");switch(mapType){case"delivery-point":orderingMapPageTitle.textContent="Youngsters | Пункты выдачи",sidebarTopText.textContent="Выберите пункт выдачи";break;case"shop":orderingMapPageTitle.textContent="Youngsters | Магазины",sidebarTopText.textContent="Выберите магазин"}const addAddressToSidebar=e=>{var t=document.querySelector('[data-sidebar-page="ordering-map"]'),r=document.getElementById("sidebar-ordering-map-checkbox").content.querySelector(".checkbox").cloneNode(!0),d=r.querySelector(".checkbox__input"),i=r.querySelector(".checkbox__text"),d=(d.name=mapType,d.setAttribute("data-id",e.id),i.textContent=e.name,document.createElement("li"));d.classList.add("sidebar-ordering-map__list-item"),d.insertAdjacentElement("afterbegin",r),t.querySelector("ul.sidebar-ordering-map__list").insertAdjacentElement("beforeend",d)},toggleAddressContent=e=>{document.querySelectorAll(".sidebar-ordering-map__list-item__content")?.forEach(e=>e.remove());var t=`
                <div class="sidebar-ordering-map__list-item__content">
                    <p>${e.schedule}</p>
                    <p>${e.description}</p>
                </div>
            `,e=document.querySelector(`[data-id="${e.id}"]`),r=e?.closest(".sidebar-ordering-map__list-item");e.checked=!0,r.insertAdjacentHTML("beforeend",t)},orderingMapSidebarCheckboxes=(("delivery-point"===mapType?deliveryPoints:shops).forEach(e=>{addAddressToSidebar(e);var t=L.marker([e.lat,e.lng]).addTo(map);t._icon.setAttribute("data-sidebar-target","ordering-map"),t._icon.setAttribute("src","./images/icons/map-marker.svg"),t.on("click",()=>{toggleSidebar("add","ordering-map"),toggleAddressContent(e)})}),document.querySelectorAll(".sidebar-ordering-map .checkbox")),orderingMapSubmitBtn=(orderingMapSidebarCheckboxes.forEach(r=>r.addEventListener("click",()=>{const t=r.querySelector("[data-id]").getAttribute("data-id");var e=("delivery-point"===mapType?deliveryPoints:shops).find(e=>e.id===+t);toggleAddressContent(e)})),document.getElementById("sidebar-ordering-map-submit"));orderingMapSubmitBtn.addEventListener("click",()=>{const t=+document.querySelector(".sidebar-ordering-map .checkbox__input:checked")?.getAttribute("data-id");var e=("delivery-point"===mapType?deliveryPoints:shops).find(e=>e.id===t)?.name;e&&(localStorage.setItem(mapType+"-address",e),window.location.href="ordering.html")});