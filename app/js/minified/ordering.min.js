let deliveryPointAddress=localStorage.getItem("delivery-point-address")||"",shopAddress=localStorage.getItem("shop-address")||"";const otherRecipientFields=document.querySelector(".ordering-form-section--other-recipient__fields"),otherRecipientCheckbox=document.querySelector(".ordering-form-section--other-recipient__wrapper .checkbox__input"),cityPickBtn=(otherRecipientCheckbox.addEventListener("click",()=>{otherRecipientFields.classList.toggle("ordering-form-section--other-recipient__fields--active")}),document.getElementById("city-pick-btn")),currentCity=document.querySelector(".ordering-form-section__toggle-sidebar__title"),receiptMethodSection=(cityPickBtn.addEventListener("click",()=>{var e=[...document.querySelectorAll(".sidebar-city__items .checkbox__input")].filter(e=>e.checked)[0];e&&(currentCity.textContent=e.closest(".checkbox").querySelector(".checkbox__text").textContent,currentCity.setAttribute("data-city-value",e.value),toggleSidebar("remove","city-pick"),toggleBackgroundBlur("remove"))}),document.querySelector(".ordering-form-section--receipt-method")),setTextAndBtnTextContentToReceiptMethod=()=>{var e=[...document.querySelectorAll(".ordering-form-section__radio-btns__btn .radio__input")].filter(e=>e.checked)[0],t=document.getElementById("ordering-form-choose-delivery-point"),o=document.getElementById("ordering-form-choose-shop"),n=(t.addEventListener("click",()=>{localStorage.setItem("ordering-map-type","delivery-point"),location.href="ordering-map.html"}),o.addEventListener("click",()=>{localStorage.setItem("ordering-map-type","shop"),location.href="ordering-map.html"}),document.querySelector(".ordering-form-section__text--address")),n=(n&&n.remove(),receiptMethodSection.querySelector("#ordering-form-section-additional")),r=document.getElementById("ordering-form-section-additional--sm-delivery-point-address"),d=document.getElementById("ordering-form-section-additional--sm-shop-address"),i=document.createElement("p");i.classList.add("ordering-form-section__text","ordering-form-section__text--address"),deliveryPointAddress&&"delivery-point"===e.value?(window.matchMedia("(max-width: 650px)").matches?(i.textContent=deliveryPointAddress,t.querySelector("p").textContent="Изменить ПВЗ",r):(i.textContent="ПУНКТ ВЫДАЧИ: "+deliveryPointAddress,t.querySelector("p").textContent="Изменить ПВЗ",n)).insertAdjacentElement("beforeend",i):deliveryPointAddress||(t.querySelector("p").textContent="Выбрать ПВЗ"),shopAddress&&"shop"===e.value?(window.matchMedia("(max-width: 650px)").matches?(i.textContent=shopAddress,o.querySelector("p").textContent="Изменить магазин",d):(i.textContent="МАГАЗИН: "+shopAddress,o.querySelector("p").textContent="Изменить магазин",n)).insertAdjacentElement("beforeend",i):shopAddress||(o.querySelector("p").textContent="Выбрать магазин")},toggleReceiptMethodContent=t=>{var e=document.importNode(document.getElementById("ordering-form-delivery__desc").content,!0),o=document.importNode(document.getElementById("ordering-form-address").content,!0),n=document.importNode(document.getElementById("ordering-form-delivery-point__desc").content,!0),r=document.importNode(document.getElementById("ordering-form-shop__desc").content,!0),d=receiptMethodSection.querySelector("#ordering-form-section-additional"),i=document.getElementById("ordering-form-section-additional--sm-delivery-desc"),c=document.getElementById("ordering-form-section-additional--sm-delivery-point-desc"),s=document.getElementById("ordering-form-section-additional--sm-shop-desc");switch(d.innerHTML="",i.innerHTML="",c.innerHTML="",s.innerHTML="",receiptMethodSection.querySelectorAll(".ordering-form-section__radio-btns__btn").forEach(e=>{e.classList.remove("ordering-form-section__radio-btns__btn--active"),e.classList.contains("ordering-form-section__radio-btns__btn--"+t)&&e.classList.add("ordering-form-section__radio-btns__btn--active")}),t){case"delivery":(window.matchMedia("(max-width: 650px)").matches?i:d).insertAdjacentElement("beforeend",e.querySelector(".ordering-form-section__desc")),d.insertAdjacentElement("beforeend",o.querySelector(".ordering-form-section__address"));break;case"delivery-point":(window.matchMedia("(max-width: 650px)").matches?c:d).insertAdjacentElement("beforeend",n.querySelector(".ordering-form-section__desc"));break;case"shop":(window.matchMedia("(max-width: 650px)").matches?s:d).insertAdjacentElement("beforeend",r.querySelector(".ordering-form-section__desc"))}},receiptMethodsRadioBtns=document.querySelectorAll(".ordering-form-section__radio-btns__btn"),submitBtn=(receiptMethodsRadioBtns.forEach(e=>{const t=e.querySelector('[name="receipt-method"]');t.checked&&(toggleReceiptMethodContent(t.value),setTextAndBtnTextContentToReceiptMethod()),e.addEventListener("click",()=>{toggleReceiptMethodContent(t.value),setTextAndBtnTextContentToReceiptMethod()})}),document.querySelector('.ordering-form-amount .button-first[type="submit"]')),paymentMethodsBtns=document.querySelectorAll('[name="payment-method"]'),setSubmitBtnTextContent=()=>{var e=[...paymentMethodsBtns].filter(e=>e.checked)[0]?.value;"online"===e?submitBtn.textContent="Перейти к оплате":"upon"===e&&(submitBtn.textContent="Создать заказ")};paymentMethodsBtns.forEach(e=>e.addEventListener("click",setSubmitBtnTextContent));